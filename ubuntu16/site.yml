# http://docs.ansible.com/ansible/playbooks_environment.html
# environment:
#   http_proxy: http://proxy.example.com:8080
---
- name: configure platform
  hosts: localhost
  gather_facts: False
  become: True

  vars_files:
    - "vars/main.yml"
    - "../global_vars.yml"

  pre_tasks:

    - name: configure python
      raw: sudo apt-get install python-minimal aptitude -y

    - setup:
       filter: ansible_*

    - name: set store fact
      set_fact:
        cif_store_store: 'elasticsearch'
      when: CIF_ES == "1"

    - import_tasks: tasks/main.yml

  roles:
    #- { role: ubuntu16, tags: role-ubuntu16 }
    - { role: elastic.elasticsearch,
        es_config: {
          bootstrap.memory_lock: true,
          node.data: true,
          node.master: true,
        },
        es_version: "5.4.3",
        when: router_store_store == 'elasticsearch'
      }
    - { role: csirtgadgets.cif, tags: role-cif }

  post_tasks:
